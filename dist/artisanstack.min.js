/*! artisanstack 22-06-2015 */
!function(a,b){"use strict";function c(a,b){return a.replace(b[0],"<code>\n"+l(b[1]).replace(/\n/gm,"<br/>").replace(/\ /gm,"&nbsp;")+"</code>\n")}function d(a,b){var c=b[1].length;return a.replace(b[0],"<h"+c+">"+b[2]+"</h"+c+">\n")}function e(a,c){var d,e,f=0,g=[],h=c[0].split("\n"),i=0,j=!1,k=0,l=0;for(d="*"===c[0].trim().substr(0,1)||"-"===c[0].trim().substr(0,1)?"<ul>":"<ol>",e=0;e<h.length;e++)if(null!==(k=/^((\s*)((\*|\-)|\d(\.|\))) ([^\n]+))/.exec(h[e]))){for(k[2]===b||0===k[2].length?l=0:(j===!1&&(j=k[2].replace(/\t/,"    ").length),l=Math.round(k[2].replace(/\t/,"    ").length/j));i>l;)d+=g.pop(),i--,f--;for(;l>i;)"*"===k[0].trim().substr(0,1)||"-"===k[0].trim().substr(0,1)?(d+="<ul>",g.push("</ul>")):(d+="<ol>",g.push("</ol>")),i++,f++;d+="<li>"+k[6]+"</li>\n"}for(;f>0;)d+="</ul>",f--;return d+="*"===c[0].trim().substr(0,1)||"-"===c[0].trim().substr(0,1)?"</ul>":"</ol>",a.replace(c[0],d+"\n")}function f(a,b,c){var d,e,f="<table><tr>",g=b[1].split("|"),h=b[4].split("|");for(d=0;d<g.length;d++)h.length<=d?h.push(0):":"===h[d].trimRight().slice(-1)&&c!==!0?":"===h[d][0]?h[d]=3:h[d]=2:c!==!0&&":"===h[d][0]?h[d]=1:h[d]=0;var i=["<th>",'<th align="left">','<th align="right">','<th align="center">'];for(d=0;d<g.length;d++)f+=i[h[d]]+g[d].trim()+"</th>";f+="</tr>",i=["<td>",'<td align="left">','<td align="right">','<td align="center">'];var j=b[7].split("\n");for(d=0;d<j.length;d++){var k=j[d].split("|");if(0!==k[0].length){for(;h.length<k.length;)h.push(0);for(f+="<tr>",e=0;e<k.length;e++)f+=i[h[e]]+k[e].trim()+"</td>";f+="</tr>\n"}}return f+="</table>",a=a.replace(b[0],f)}function g(a,b){var c=[],d=[["<i>","</i>"],["<b>","</b>"],["<i><b>","</b></i>"]];return"~~"===b[1]?a=a.replace(b[0],"<del>"+b[2]+"</del>"):(c=d[b[1].length-1],a=a.replace(b[0],c[0]+b[2]+c[1])),a}function h(a,b,c){return a="!"===b[0].substr(0,1)?a.replace(b[0],'<img src="'+b[2]+'" alt="'+b[1]+'" title="'+b[1]+'" />\n'):a.replace(b[0],"<a "+m(b[2],c)+'href="'+b[2]+'">'+b[1]+"</a>\n")}function i(a,b){return a=a.replace(b[0],'<a href="mailto:'+b[1]+'">'+b[1]+"</a>")}function j(a,b,c){var d=b[1];return-1===d.indexOf("://")&&(d="http://"+d),a=a.replace(b[0],"<a "+m(d,c)+'href="'+d+'">'+d.replace(/(https:\/\/|http:\/\/|mailto:|ftp:\/\/)/gim,"")+"</a>")}function k(a,b){return a.replace(b[0],"\n<hr/>\n")}function l(a){var b=document.createElement("div");return b.appendChild(document.createTextNode(a)),a=b.innerHTML}function m(a,b){var c;return-1!==a.indexOf("/")&&b!==!0?(c=a.split("/"),c=0===c[1].length?c[2].split("."):c[0].split("."),'class="mmd_'+c[c.length-2].replace(/[^\w\d]/g,"")+c[c.length-1]+'" '):""}function n(a,b){var l,n,o,q,r=[];for(a="\n"+a+"\n",b!==!0&&(p.lists=/^((\s*(\*|\d\.) [^\n]+)\n)+/gm);null!==(q=p.code.exec(a));)a=c(a,q);for(;null!==(q=p.headline.exec(a));)a=d(a,q);for(;null!==(q=p.lists.exec(a));)a=e(a,q);for(;null!==(q=p.tables.exec(a));)a=f(a,q,b);for(;null!==(q=p.boldItalic.exec(a));)a=g(a,q);for(;null!==(q=p.links.exec(a));)a=h(a,q,b);for(;null!==(q=p.mail.exec(a));)a=i(a,q);for(;null!==(q=p.url.exec(a));)a=j(a,q,b);for(;null!==(q=p.reflinks.exec(a));)n=new RegExp("\\["+q[2]+"\\]: ?([^ \n]+)","gi"),null!==(l=n.exec(a))&&(a=a.replace(q[0],"<a "+m(l[1],b)+'href="'+l[1]+'">'+q[1]+"</a>"),r.push(l[0]));for(var s=0;s<r.length;s++)a=a.replace(r[s],"");for(;null!==(q=p.smlinks.exec(a));){switch(q[2]){case"t":o="https://twitter.com/"+q[1];break;case"gh":o="https://github.com/"+q[1];break;case"fb":o="https://www.facebook.com/"+q[1];break;case"gp":o="https://plus.google.com/+"+q[1]}a=a.replace(q[0],"<a "+m(o,b)+'href="'+o+'">'+q[1]+"</a>")}for(;null!==(q=p.hr.exec(a));)a=k(a,q);return a.replace(/ {2,}[\n]{1,}/gim,"<br/><br/>")}var o=function(){};o.version=o.VERSION="0.0.0",a.ArtisanStack=o;var p={headline:/^(\#{1,6})([^\#\n]+)$/m,code:/\s\`\`\`\n?([^`]+)\`\`\`/g,hr:/^(?:([\*\-_] ?)+)\1\1$/gm,lists:/^((\s*((\*|\-)|\d(\.|\))) [^\n]+)\n)+/gm,boldItalic:/(?:([\*_~]{1,3}))([^\*_~\n]+[^\*_~\s])\1/g,links:/!?\[([^\]<>]+)\]\(([^ \)<>]+)( "[^\(\)\"]+")?\)/g,reflinks:/\[([^\]]+)\]\[([^\]]+)\]/g,smlinks:/\@([a-z0-9]{3,})\@(t|gh|fb|gp|adn)/gi,mail:/<(([a-z0-9_\-\.])+\@([a-z0-9_\-\.])+\.([a-z]{2,7}))>/gim,tables:/\n(([^|\n]+ *\| *)+([^|\n]+\n))((:?\-+:?\|)+(:?\-+:?)*\n)((([^|\n]+ *\| *)+([^|\n]+)\n)+)/g,include:/[\[<]include (\S+) from (https?:\/\/[a-z0-9\.\-]+\.[a-z]{2,9}[a-z0-9\.\-\?\&\/]+)[\]>]/gi,url:/<([a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?)>/g};o.md.parse=n}(this);